<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc." />

  <!-- Favicon -->
  <link rel="shortcut icon" href="./assets/favicon/favicon.ico" type="image/x-icon" />

  <!-- Map CSS -->
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" />

  <!-- Libs CSS -->
  <link rel="stylesheet" href="./assets/css/libs.bundle.css" />

  <!-- Theme CSS -->
  <link rel="stylesheet" href="./assets/css/theme.bundle.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style-custom.css" />
  <link rel="stylesheet" href="./assets/css/style-custom-2.css" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/neuicons@1.9.0/css/neu.min.css" />

  <!-- Title -->
  <title>Sapiengraph - Dashboard</title>
  <style>
    th.active-header {
      color: black !important;
    }

    th:hover {
      cursor: pointer;
    }
  </style>

  <!-- import Jquery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
  <!-- NAVIGATION -->
  <nav class="navbar navbar-vertical fixed-start navbar-expand-md navbar-light" id="sidebar">
    <div class="container-fluid">
      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarCollapse"
        aria-controls="sidebarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Brand -->
      <a class="navbar-brand" href="./index.html">
        <img src="./assets/img/logo.svg" class="navbar-brand-img mx-auto" alt="..." />
      </a>

      <!-- User (xs) -->
      <div class="navbar-user d-md-none">
        <div class="btn-group dropdown">
          <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown"
            aria-expanded="false">
            example@nubela.co <i class="fe fe-chevron-down ms-3"></i>
          </button>

          <div class="dropdown-menu dropdown-menu-end shadow-lg w-100" aria-labelledby="dropdownMenuButton">
            <div class="row align-items-center">
              <a class="text-center text-secondary nav-link mt-3 mb-1" href="index.html">
                <i class="fe fe-log-out"></i> Log out
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Credits (md)-->
      <div class="navbar-user d-none d-md-flex border-bottom pb-4 mb-4">
        <div class="row">
          <div class="col-12 mb-4">
            <label class="mb-2 text-gray-700">
              Credits
              <code class="h2 text-black" style="font-family: Cerebri Sans, sans-serif">
                  100,000</code><code class="small text-gray-700" style="font-family: Cerebri Sans, sans-serif">/125,000
                </code>
            </label>

            <div class="progress">
              <div class="progress-bar bg-secondary" role="progressbar" style="width: 80%" aria-valuenow="80"
                aria-valuemin="0" aria-valuemax="100">
                100,000/125,000
              </div>
            </div>
          </div>

          <div class="col-12 mb-3">
            <label class="mb-2 text-gray-700">
              Fresh profiles
              <code class="h2 text-black" style="font-family: Cerebri Sans, sans-serif">
                  7,500</code><code class="small text-gray-700" style="font-family: Cerebri Sans, sans-serif">/12,500
                </code>
            </label>

            <div class="progress">
              <div class="progress-bar bg-secondary" role="progressbar" style="width: 60%" aria-valuenow="60"
                aria-valuemin="0" aria-valuemax="100">
                7,500/12,500
              </div>
            </div>
          </div>

          <div class="col-12">
            <a class="btn btn-outline-success rounded-pill w-100 mt-3" href="index.html">
              Buy credits
            </a>
          </div>
        </div>
      </div>

      <!-- Collapse -->
      <div class="collapse navbar-collapse" id="sidebarCollapse">
        <!-- Credits (xs)-->
        <div class="navbar-user d-md-none mb-4">
          <div class="row text-center text-md-left">
            <div class="col-12 mb-4">
              <label class="mb-2 text-gray-700">
                Credits
                <code class="h2 text-black" style="font-family: Cerebri Sans, sans-serif">
                    100,000</code><code class="small text-gray-700" style="font-family: Cerebri Sans, sans-serif">/125,000
                  </code>
              </label>

              <div class="progress">
                <div class="progress-bar bg-secondary" role="progressbar" style="width: 80%" aria-valuenow="80"
                  aria-valuemin="0" aria-valuemax="100">
                  100,000/125,000
                </div>
              </div>
            </div>

            <div class="col-12 mb-3">
              <label class="mb-2 text-gray-700">
                Fresh profiles
                <code class="h2 text-black" style="font-family: Cerebri Sans, sans-serif">
                    7,500</code><code class="small text-gray-700" style="font-family: Cerebri Sans, sans-serif">/12,500
                  </code>
              </label>

              <div class="progress">
                <div class="progress-bar bg-secondary" role="progressbar" style="width: 60%" aria-valuenow="60"
                  aria-valuemin="0" aria-valuemax="100">
                  7,500/12,500
                </div>
              </div>
            </div>

            <div class="col-12">
              <a class="btn btn-outline-success rounded-pill w-100 mt-3" href="index.html">
                Buy credits
              </a>
            </div>
          </div>
        </div>

        <!-- Navigation -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#sidebarBilling" data-bs-toggle="collapse" role="button" aria-expanded="true"
              aria-controls="sidebarBilling">
              <i class="fe fe-dollar-sign"></i> Billing
            </a>
            <div class="collapse show" id="sidebarBilling">
              <ul class="nav nav-sm flex-column">
                <li class="nav-item">
                  <a href="./account-plans-and-payments.html" class="nav-link">
                    <span class="border-start border-2 ps-3">Plan and payments</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="./index.html" class="nav-link">
                    <span class="border-start border-2 ps-3">Buy credits</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="prospector.html">
              <i class="fe fe-target"></i> Prospector
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-bold text-success" href="job-change-monitor.html">
              <i class="fe fe-briefcase"></i> Job Change Monitor
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="collapse" role="button" aria-expanded="true"
              aria-controls="sidebarDataEnrichment">
              <i class="fe fe-database"></i> Data Enrichment
            </a>
            <div class="collapse" id="sidebarDataEnrichment">
              <ul class="nav nav-sm flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link d-flex justify-content-between align-items-center" target="_blank">
                    <span>Google Sheets Addon</span>
                    <i class="fe fe-external-link text-muted"></i>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link d-flex justify-content-between align-items-center" target="_blank">
                    <span>Formula Documentation</span>
                    <i class="fe fe-external-link text-muted"></i>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link d-flex justify-content-between align-items-center" target="_blank">
                    <span>Google Chrome Extension</span>
                    <i class="fe fe-external-link text-muted"></i>
                  </a>
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item mb-4">
            <a class="nav-link" href="#!">
              <i class="fe fe-file"></i> Docs
            </a>
          </li>

          <!-- old-logout
            <hr class="my-4">

            <li class="nav-item">
              <a class="nav-link mb-3" href="index.html">
                <i class="fe fe-log-out"></i> Log out 
              </a>
            </li>
            -->
        </ul>

        <div class="mt-md-auto"></div>

        <!-- User (md) -->
        <div class="navbar-user d-none d-md-flex" id="sidebarUser">
          <div class="btn-group dropup">
            <button type="button" class="btn btn-outline-secondary dropdown-toggle w-100" data-bs-toggle="dropdown"
              aria-expanded="false">
              example@nubela.co <i class="fe fe-chevron-up ms-3"></i>
            </button>

            <div class="dropdown-menu dropdown-menu-center shadow-lg w-100" aria-labelledby="dropdownMenuButton">
              <div class="row align-items-center">
                <a class="text-center text-secondary nav-link mt-3 mb-1" href="index.html">
                  <i class="fe fe-log-out"></i> Log out
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- / .navbar-collapse -->
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-12 main-content-dashboard">
          <!-- Header -->
          <div class="header mt-md-5">
            <div class="header-body">
              <div class="row align-items-center">
                <div class="col">
                  <!-- Pretitle -->
                  <h6 class="header-pretitle">Overview</h6>

                  <!-- Title -->
                  <h1 class="header-title">Job Change Monitor</h1>
                </div>
              </div>
              <!-- / .row -->
            </div>
          </div>

          <!-- Success Export Result -->
          <div id="alertSuccessExport" class="alert alert-success alert-dismissible fade show d-none" role="alert">
            Successfully exported to Google Sheets

            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          <!-- /Success Export Result -->

          <!-- Card -->
          <div class="card py-6">
            <div class="row justify-content-center align-items-center">
              <div class="col-10 col-md-6 col-lg-5 col-xl-6 text-center">
                <img src="./assets/img/illustrations/no-profiles-monitored-2.png" alt="" srcset="" class="w-100 h-auto">
              </div>
            </div>
            <div class="row justify-content-center align-items-center">
              <div class="col-10 text-center">
                <p class="lead mb-2 fw-bold">No profiles monitored</p>
                <p class="text-gray-700 mb-4">Please add profiles to be monitored.</p>
              </div>
            </div>
          </div>

          <br />
        </div>
      </div>
      <!-- / .row -->
    </div>

    <div class="modal fade" id="exportGSModal" tabindex="-1" aria-labelledby="exportGSModalLavel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Export profiles to Google Sheets
            </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <!-- Select -->
              <div class="mb-3">
                <label for="export-type" class="col-form-label">Select to export:</label>
                <select id="export-type" class="form-select" data-choices>
                  <option>Export all profiles</option>
                  <option>Export only changes from this week</option>
                </select>
              </div>
              <!-- Select -->
              <div class="mb-3">
                <label for="sheetDestionation" class="col-form-label">Select Sheet Destination:</label>
                <select id="sheetDestionations" class="form-select">
                  <option value="Dianna Smiley">Dianna Smiley</option>
                  <option value="Ab Hadley">Ab Hadley</option>
                  <option value="Adolfo Hess">Adolfo Hess</option>
                  <option value="Daniela Dewitt">Daniela Dewitt</option>
                  <option value="David King">David King</option>
                </select>
              </div>
              <div class="mb-3">
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="newGoogleSheetDocCheck" />
                  <label class="form-check-label fs-12" for="newGoogleSheetDocCheck">Create a new Google Sheets document
                    for the export with
                    an autogenerated filename</label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer text-center">
            <button id="exportGS" type="button"
              class="w-100 btn btn-success rounded-pill px-4 py-3 d-flex justify-content-center align-items-start text-center d-inline-flex">
              <div class="d-inline-flex justify-content-center">
                <div class="lds-ring">
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
                <span id="textExportButton" class="w-100"> Export </span>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- / .main-content -->

  <!-- Alert Fail Export -->
  <div id="alertFailedExport" class="alert-export rounded mb-4">
    <div class="alert alert-danger alert-fail-message" role="alert"></div>
  </div>

  <!-- JAVASCRIPT -->

  <script>

    // Describe Sheet Destionations Form & Check New GS Doc
    const newGoogleSheetDocCheck = document.getElementById(
      "newGoogleSheetDocCheck"
    );
    const sheetDestinationsSelect =
      document.getElementById("sheetDestionations");

    // button change to loading on click
    const theButton = document.getElementById("exportGS");
    const textExportButton = document.getElementById("textExportButton");

    // Alert
    // Get the alert container and message elements
    const alertFailContainer = document.getElementById("alertFailedExport");
    let alertFailMessage = document.querySelector("alert-fail-message");

    const alertSuccessExportSec =
      document.getElementById("alertSuccessExport");

    // Hide Sheet Destionation Form when new doc check
    newGoogleSheetDocCheck.addEventListener("change", () => {
      if (newGoogleSheetDocCheck.checked) {
        sheetDestinationsSelect.classList.add("d-none");
      } else {
        sheetDestinationsSelect.classList.remove("d-none");
      }
    });

    // Function to display the fail alert
    function displayAlertFail(message) {
      // Set the alert message
      alertFailMessage.textContent = message;

      // Add the animation class to the alert container
      alertFailContainer.classList.add("animate");

      // Remove the animation class after 0.5 seconds
      setTimeout(() => {
        alertFailContainer.classList.remove("animate");
      }, 500);

      // Automatically close the alert after 3 seconds
      setTimeout(() => {
        alertFailContainer.style.display = "none";
      }, 6000);
    }

    theButton.addEventListener("click", () => {
      theButton.classList.add("button--loading");
      // Add your loading animation or text here
      setTimeout(() => {
        theButton.classList.remove("button--loading");
      }, 2000); // Remove the loading state after 2 seconds
    });

    $(function () {
      theButton.addEventListener("click", () => {
        textExportButton.textContent = " ";

        setTimeout(() => {
          // If Export Failed Scenario
          // textExportButton.textContent = "Export";
          // alertFailContainer.style.display = "block";
          // displayAlertFail("Export Failed.");

          // If Export Success Scenario
          textExportButton.textContent = "Export";
          alertSuccessExportSec.classList.remove("d-none");
          $('#exportGSModal').modal('hide');
        }, 2000); // Change the text back to "Submit" after 2 seconds
      });
    });
  </script>

  <!-- Table sorting JS-->
  <script>
    let currentColumn = 3; // Set Last checked as the default sorted column
    let lastCheckedColumnSorted = true;

    document.addEventListener("DOMContentLoaded", function (event) {
      // Simulate click on "Last checked" header after the page loads (default sort)
      sortTable(currentColumn);
      lastCheckedColumnSorted = false;
    });

    function sortTable(columnIndex) {
      const table = document.getElementById("myTable");
      const tbody = table.querySelector("tbody");
      const rows = Array.from(tbody.querySelectorAll("tr"));

      rows.sort((a, b) => {
        let cellA = a
          .getElementsByTagName("td")
        [columnIndex].innerText.trim()
          .toLowerCase();
        let cellB = b
          .getElementsByTagName("td")
        [columnIndex].innerText.trim()
          .toLowerCase();

        if (columnIndex === 3) {
          // For Last checked column, reverse sorting
          [cellA, cellB] = [cellB, cellA];
        }

        return cellA.localeCompare(cellB);
      });

      tbody.innerHTML = "";
      rows.forEach((row) => {
        tbody.appendChild(row);
      });

      resetHeaders();
      const clickedHeader = document.getElementById(`header${columnIndex}`);

      if (!lastCheckedColumnSorted && columnIndex === 3) {
        clickedHeader.classList.add("active-header");
        lastCheckedColumnSorted = true;
      } else {
        clickedHeader.classList.add("active-header");
      }

      currentColumn = columnIndex;
      resetSortIcons(columnIndex);
    }

    function resetHeaders() {
      const headers = document.querySelectorAll("th");
      headers.forEach((header) => {
        header.classList.remove("active-header");
      });
    }

    function resetSortIcons(exceptIndex) {
      const icons = document.querySelectorAll(".fa-sort");
      icons.forEach((icon) => {
        icon.classList.remove("fa-sort-up", "fa-sort-down");
        icon.classList.add("fa-sort");
      });

      const clickedHeaderIcon = document
        .getElementById(`header${exceptIndex}`)
        .getElementsByTagName("i")[0];
      clickedHeaderIcon.classList.remove("fa-sort");
      clickedHeaderIcon.classList.add("fas", "fa-sort");
    }
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>

  <!-- Map JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js"></script>

  <!-- Vendor JS -->
  <script src="./assets/js/vendor.bundle.js"></script>

  <!-- Theme JS -->
  <script src="./assets/js/theme.bundle.js"></script>
</body>

</html>